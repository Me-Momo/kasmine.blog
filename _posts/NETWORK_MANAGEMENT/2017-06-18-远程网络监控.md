---
layout: post
title: RMON —— 远程网络监控
category: 
tag: 
---

# RMON

> 对SNMP标准的补充
> RMON 提供一种高效、低成本的网络监视方案

## 名词解释
    - 远程监视技术，对SNMPv1功能的扩展。
    - 主要是针对SNMP中管理进程与管理代理之间的通信缺少实时性以及轮训开销太大的缺陷而提出来的**MIB变量**。这组MIB变量都是通过对网络的连续、实时监视而生成。
        + SNMP轮询的弱点
            - 没有伸缩性
            - 将收集数据的负担加在网络管理控制台


    - 远程网络监视
        + 由网络监视器在本地对局域网流量进行统计、分析
        + 收集的参数、分析结果可以通过某种方式传递给远程网络监视器
        + 远程网络监视器以一定的方式控制网络监视器


> 网络监视器: 用于监视整个网络**通信**情况的设备 【考题】
> 远程网络监视器：每个子网一个监视器，并且与中央管理站通信

* 目标

    【考题】RMON定义了**远程网络监视的管理信息库**、**SNMP管理站与远程监视器之间的接口**。
    一般来说，RMON的目标就是**监视子网范围内的通信，从而减少管理站和被管理系统之间的通信负担**

    具体目标：

    - **主动监视**
    - **离线操作**
    - **提供增值数据** ？？ 🐶
        + 监视器可以分析收集到的子网数据，从而减轻管理站的计 算任务。（由本地监视器进行计算操作，减轻远程管理站的负担）
    - **问题检测和报告** ？？ 🐶
    - **多管理站操作**  ？？ 🐶

* 优点【未背】

    - 降低网络管理信息的通信量
    - 减轻网络管理站的负担
    - 本地监视可以增加信息的可靠性
    - 通过对局域网段所有包的捕获，能够有效地获取局域网 段的总体流量参数
    - 通过对局域网段的连续监控，可以获得更为及时的统计 信息，从而能够对网络故障做出及时诊断

## RMON实现的两种方式【未背】【不懂】

* (1) 使用一个专用设备来实现远程监视器，其 唯一目的就是捕获并分析流量;
* (2) 由具有其它任务的设备如工作站、服务器 或路由器来执行。把它作为系统功能的一部分， 该系统有专用于监视功能的处理器和内存资源， 有了这些专用资源，远程监视器可以执行比一 个只支持MIB-II的代理更复杂、更广泛的功能。 为了有效地进行网络管理，这些监视器需要与 一种中央网络管理站通信。

## RMON的表管理

* 2种新的数据类型：
    - EntryStatus - 行状态对象
        +   EntryStatus ::= INTEGER {valid(1), createRequest(2), underCreation(3), invalid(4)}
    - OwnerString - 行所有者对象


* RMON MIB表  【考题】属于MIB-2 下的子树
    - 数据表
        + 存储数据，负责保存监控数据
    - 控制表
        + 定义数据表的结构 【考题】


## RMON 功能组

|RMON1 MIB功能组（9+1）|功能或说明|
|:---|:---|---:|
|统计组|统计以太网流量|
|历史组||
|事件组|产生日志条目和／或SNMP陷阱|
|警报组|超过阈值的警告|
|⚠️ 主机组||
|⚠️ 最高N台主机组||
|⚠️ 矩阵组|记录一个子网内各对主机间的流量信息;可用于入侵检测|
|⚠️ 过滤组|定义哪些数据报文的类型进行捕获和存储；数据过滤器和状态过滤器|
|⚠️ 捕获组|建立一组缓冲区，用于存储从通道中捕获 的报文|
|以太网令牌环网组||

* 存在的依赖

    - 警报组需要事件组的实现。
    - 最高N台主机组(hostTopN)需要主机组的实现   
    - 包捕获组需要过滤组的实现。



### 【考题】

- 在RMON1中，实现警报组(alarm)时必须先实现（ ）A
    A.事件组(event) B.统计组(statistics) C.捕获组(capture) D.主机组(host)

- RMON2监视器配置组中，定义了监视器的（ ）D
    A.串行配置表	B.网络配置表	C.陷入定义表	D.标准参数集合


## RMON2

* 利用RMON2，你能够了解:
    - (1)按照段分析协议; 
    - (2)按照网络地址分析协议; 
    - (3)为不同网络地址之间的通信分析协议; 
    - (4)在应用层一个网络地址分析协议; 
    - (5)不同网络地址之间的对话分析应用程序通信

   - 【考题】引入了两种与对象索引有关的新功能
        + 时间过滤器索引
            - 为了提高效率，利用时间过滤器进行索引，使得管理站可以从监视器取得那些自上次某个时间查询以来改变了的变量
        + 外部对象索引
            - ⚠️ 在SNMPv2 的SMI中，已明确指出可以使用不是概念表成员的对象索引项。RMON采用了这种新的的表结构，经常使用了外部对象索引数据表，以便**把数据表和对应的控制表结合**起来。


* ⚠️ ⚠️ ⚠️【考题】

|RMON2 新添的功能组 | 功能或说明 |
|:---|:---|---:|
| 协议目录组 protocolDir |提供各个网络协议的标准化表示方法| 
| 协议分布组 protocolDir |提供每个协议产生的通信统计数据|
| 地址映射组 addressMap |建立IP地址与MAC地址的映像关系|
| 网络层主机组 nlHost |基于IP地址收集网上主机信息|
| 网络层矩阵组 nlMatrix |记录主机对(源/目标)之间的 通信情况|
| 应用层主机组 alHost |对应每个主机的每个应用协议 的通信情况|
| 应用层矩阵组 alMatrix |统计一对应用层协议之间的 各种通信情况，或某种参数最大的一对应用层协议之间 的各种通信况|
| 用户历史组 userHistory |按照用户定义的参数周期收集统计数据|
| 配置监视组 probeConfig |定义了监视器的标准参数集合|
| 一致性规范组 rmonConformance |定义了不同厂商实现RMON2必须达到的最小级别|

##【考题】

* 在不修改、不违反SNMPv1管理框架的前提下，RMON规范提供了（ ）C
    A.检索未知对象的操作		B.检索表对象的操作
    C.行增加和行删除的操作	D.设置或更新变量值的操作

* 【未】SNMPv2 SMI是对SNMPv1 SMI的扩充，它引入了4个关键的概念是：对象的定义、_________、通知的定义、信息模块。





！！！🐶 如何处理并发冲突，描述过程～～～

# 作业题目

* 什么是RMON?为什么需要RMON?
* 在RMON规范中增加了哪些新的数据类型?
* RMON是如何解决多个管理站并发访问问题的?   
* RMONv2和RMONv1的区别是什么?